{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _useFadeTransition = require(\"../../components/composites/Transitions/useFadeTransition\");\n\nvar _Context = require(\"./Context\");\n\nvar _View = _interopRequireDefault(require(\"../../components/primitives/View\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar PopoverProvider = function PopoverProvider(_ref) {\n  var children = _ref.children;\n\n  var _react$default$useSta = _react[\"default\"].useState(null),\n      _react$default$useSta2 = _slicedToArray(_react$default$useSta, 2),\n      popoverItem = _react$default$useSta2[0],\n      setPopoverItem = _react$default$useSta2[1];\n\n  var _react$default$useSta3 = _react[\"default\"].useState({\n    triggerRef: null,\n    placeOverTriggerElement: undefined,\n    onClose: null,\n    animationDuration: 200\n  }),\n      _react$default$useSta4 = _slicedToArray(_react$default$useSta3, 2),\n      config = _react$default$useSta4[0],\n      setConfig = _react$default$useSta4[1];\n\n  var _react$default$useSta5 = _react[\"default\"].useState({\n    elementX: 0,\n    elementY: 0,\n    elementWidth: 0,\n    elementHeight: 0\n  }),\n      _react$default$useSta6 = _slicedToArray(_react$default$useSta5, 2),\n      state = _react$default$useSta6[0],\n      setState = _react$default$useSta6[1];\n\n  var _react$default$useSta7 = _react[\"default\"].useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  }),\n      _react$default$useSta8 = _slicedToArray(_react$default$useSta7, 2),\n      triggerElementDims = _react$default$useSta8[0],\n      setTriggerElementDims = _react$default$useSta8[1];\n\n  var getElementDims = function getElementDims(_ref2) {\n    var nativeEvent = _ref2.nativeEvent;\n\n    if (nativeEvent && nativeEvent.layout) {\n      setState({\n        elementX: nativeEvent.layout.x,\n        elementY: nativeEvent.layout.y,\n        elementWidth: nativeEvent.layout.width,\n        elementHeight: nativeEvent.layout.height\n      });\n    }\n  };\n\n  _react[\"default\"].useEffect(function () {\n    if (config.triggerRef && config.triggerRef.current) {\n      config.triggerRef.current.measure(function (x, y, width, height) {\n        setTriggerElementDims({\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        });\n      });\n    }\n  }, [config.triggerRef]);\n\n  var positions = (0, _utils.getCoordinates)(triggerElementDims.y, triggerElementDims.x, state.elementWidth, state.elementHeight, triggerElementDims.width, triggerElementDims.height, config.placeOverTriggerElement);\n\n  var _ref3 = (0, _useFadeTransition.useFadeTransition)(config.animationDuration),\n      fadeValue = _ref3.fadeValue,\n      fadeIn = _ref3.fadeIn,\n      fadeOut = _ref3.fadeOut;\n\n  var providerStyle = _reactNative.StyleSheet.create({\n    wrapper: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      right: 0,\n      left: 0,\n      zIndex: 999\n    }\n  });\n\n  popoverItem ? fadeIn() : fadeOut();\n  return _react[\"default\"].createElement(_Context.PopoverContext.Provider, {\n    value: {\n      setPopoverItem: setPopoverItem,\n      defaultConfig: config,\n      setConfig: setConfig,\n      parentComponentConfig: config.parentComponentConfig\n    }\n  }, children, _react[\"default\"].createElement(_reactNative.Animated.View, {\n    nativeID: \"popover-provider\",\n    style: [providerStyle.wrapper, {\n      opacity: fadeValue\n    }],\n    pointerEvents: popoverItem ? 'auto' : 'none'\n  }, _react[\"default\"].createElement(_reactNative.TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      setPopoverItem(null);\n      config.onClose && config.onClose();\n    }\n  }, _react[\"default\"].createElement(_View[\"default\"], {\n    style: providerStyle.wrapper\n  })), _react[\"default\"].createElement(_View[\"default\"], {\n    zIndex: 99999,\n    onLayout: getElementDims,\n    position: \"absolute\",\n    style: positions\n  }, popoverItem)));\n};\n\nvar _default = PopoverProvider;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["PopoverProvider.tsx"],"names":["PopoverProvider","children","React","triggerRef","placeOverTriggerElement","onClose","animationDuration","elementX","elementY","elementWidth","elementHeight","x","y","width","height","getElementDims","nativeEvent","setState","config","setTriggerElementDims","positions","triggerElementDims","state","fadeOut","providerStyle","wrapper","position","top","bottom","right","left","zIndex","popoverItem","fadeIn","setPopoverItem","defaultConfig","setConfig","parentComponentConfig","opacity","fadeValue"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Animated, StyleSheet, TouchableWithoutFeedback } from 'react-native';\nimport { useFadeTransition } from '../../components/composites/Transitions/useFadeTransition';\nimport type { IPopoverConfig } from './props';\nimport { PopoverContext } from './Context';\nimport View from '../../components/primitives/View';\nimport { getCoordinates } from './utils';\n\nconst PopoverProvider = ({ children }: { children: any }) => {\n  const [popoverItem, setPopoverItem] = React.useState(null);\n  const [config, setConfig] = React.useState<IPopoverConfig>({\n    triggerRef: null,\n    placeOverTriggerElement: undefined,\n    onClose: null,\n    animationDuration: 200,\n  });\n  const [state, setState] = React.useState<any>({\n    elementX: 0,\n    elementY: 0,\n    elementWidth: 0,\n    elementHeight: 0,\n  });\n  const [triggerElementDims, setTriggerElementDims] = React.useState<any>({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  });\n  const getElementDims = ({ nativeEvent }: any) => {\n    if (nativeEvent && nativeEvent.layout) {\n      setState({\n        elementX: nativeEvent.layout.x,\n        elementY: nativeEvent.layout.y,\n        elementWidth: nativeEvent.layout.width,\n        elementHeight: nativeEvent.layout.height,\n      });\n    }\n  };\n  React.useEffect(() => {\n    if (config.triggerRef && config.triggerRef.current) {\n      config.triggerRef.current.measure(\n        (x: any, y: any, width: any, height: any) => {\n          setTriggerElementDims({ x, y, width, height });\n        }\n      );\n    }\n  }, [config.triggerRef]);\n  let positions = getCoordinates(\n    triggerElementDims.y,\n    triggerElementDims.x,\n    state.elementWidth,\n    state.elementHeight,\n    triggerElementDims.width,\n    triggerElementDims.height,\n    config.placeOverTriggerElement\n  );\n  const { fadeValue, fadeIn, fadeOut } = useFadeTransition(\n    config.animationDuration\n  );\n  let providerStyle = StyleSheet.create({\n    wrapper: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      right: 0,\n      left: 0,\n      zIndex: 999,\n    },\n  });\n\n  popoverItem ? fadeIn() : fadeOut();\n  return (\n    <PopoverContext.Provider\n      value={{\n        setPopoverItem,\n        defaultConfig: config,\n        setConfig,\n        parentComponentConfig: config.parentComponentConfig,\n      }}\n    >\n      {children}\n      <Animated.View\n        nativeID=\"popover-provider\"\n        style={[providerStyle.wrapper, { opacity: fadeValue }]}\n        pointerEvents={popoverItem ? 'auto' : 'none'}\n      >\n        <TouchableWithoutFeedback\n          onPress={() => {\n            setPopoverItem(null);\n            config.onClose && config.onClose();\n          }}\n        >\n          <View style={providerStyle.wrapper} />\n        </TouchableWithoutFeedback>\n        <View\n          zIndex={99999}\n          onLayout={getElementDims}\n          position=\"absolute\"\n          style={positions}\n        >\n          {popoverItem}\n        </View>\n      </Animated.View>\n    </PopoverContext.Provider>\n  );\n};\n\nexport default PopoverProvider;\n"]},"metadata":{},"sourceType":"script"}