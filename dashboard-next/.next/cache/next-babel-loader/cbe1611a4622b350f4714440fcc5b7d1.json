{"ast":null,"code":"\"use strict\";exports.__esModule=true;exports.getEventSourceWrapper=getEventSourceWrapper;var eventCallbacks=[];function EventSourceWrapper(options){var source;var lastActivity=new Date();var listeners=[];if(!options.timeout){options.timeout=20*1000;}init();var timer=setInterval(function(){if(new Date()-lastActivity>options.timeout){handleDisconnect();}},options.timeout/2);function init(){source=new window.EventSource(options.path);source.onopen=handleOnline;source.onerror=handleDisconnect;source.onmessage=handleMessage;}function handleOnline(){if(options.log)console.log('[HMR] connected');lastActivity=new Date();}function handleMessage(event){lastActivity=new Date();for(var i=0;i<listeners.length;i++){listeners[i](event);}if(event.data.indexOf('action')!==-1){eventCallbacks.forEach(function(cb){return cb(event);});}}function handleDisconnect(){clearInterval(timer);source.close();setTimeout(init,options.timeout);}return{close:function close(){clearInterval(timer);source.close();},addMessageListener:function addMessageListener(fn){listeners.push(fn);}};}function getEventSourceWrapper(options){if(!options.ondemand){return{addMessageListener:function addMessageListener(cb){eventCallbacks.push(cb);}};}return EventSourceWrapper(options);}","map":{"version":3,"sources":["/Users/vidhi/Sites/Projects/examples/test/dashboard-next/node_modules/next/dist/client/dev/error-overlay/eventsource.js"],"names":["exports","__esModule","getEventSourceWrapper","eventCallbacks","EventSourceWrapper","options","source","lastActivity","Date","listeners","timeout","init","timer","setInterval","handleDisconnect","window","EventSource","path","onopen","handleOnline","onerror","onmessage","handleMessage","log","console","event","i","length","data","indexOf","forEach","cb","clearInterval","close","setTimeout","addMessageListener","fn","push","ondemand"],"mappings":"AAAA,aAAaA,OAAO,CAACC,UAAR,CAAmB,IAAnB,CAAwBD,OAAO,CAACE,qBAAR,CAA8BA,qBAA9B,CAAoD,GAAIC,CAAAA,cAAc,CAAC,EAAnB,CAAsB,QAASC,CAAAA,kBAAT,CAA4BC,OAA5B,CAAoC,CAAC,GAAIC,CAAAA,MAAJ,CAAW,GAAIC,CAAAA,YAAY,CAAC,GAAIC,CAAAA,IAAJ,EAAjB,CAA4B,GAAIC,CAAAA,SAAS,CAAC,EAAd,CAAiB,GAAG,CAACJ,OAAO,CAACK,OAAZ,CAAoB,CAACL,OAAO,CAACK,OAAR,CAAgB,GAAG,IAAnB,CAAyB,CAAAC,IAAI,GAAG,GAAIC,CAAAA,KAAK,CAACC,WAAW,CAAC,UAAU,CAAC,GAAG,GAAIL,CAAAA,IAAJ,GAAWD,YAAX,CAAwBF,OAAO,CAACK,OAAnC,CAA2C,CAACI,gBAAgB,GAAI,CAAC,CAA7E,CAA8ET,OAAO,CAACK,OAAR,CAAgB,CAA9F,CAArB,CAAsH,QAASC,CAAAA,IAAT,EAAe,CAACL,MAAM,CAAC,GAAIS,CAAAA,MAAM,CAACC,WAAX,CAAuBX,OAAO,CAACY,IAA/B,CAAP,CAA4CX,MAAM,CAACY,MAAP,CAAcC,YAAd,CAA2Bb,MAAM,CAACc,OAAP,CAAeN,gBAAf,CAAgCR,MAAM,CAACe,SAAP,CAAiBC,aAAjB,CAAgC,SAASH,CAAAA,YAAT,EAAuB,CAAC,GAAGd,OAAO,CAACkB,GAAX,CAAeC,OAAO,CAACD,GAAR,CAAY,iBAAZ,EAA+BhB,YAAY,CAAC,GAAIC,CAAAA,IAAJ,EAAb,CAAyB,SAASc,CAAAA,aAAT,CAAuBG,KAAvB,CAA6B,CAAClB,YAAY,CAAC,GAAIC,CAAAA,IAAJ,EAAb,CAAwB,IAAI,GAAIkB,CAAAA,CAAC,CAAC,CAAV,CAAYA,CAAC,CAACjB,SAAS,CAACkB,MAAxB,CAA+BD,CAAC,EAAhC,CAAmC,CAACjB,SAAS,CAACiB,CAAD,CAAT,CAAaD,KAAb,EAAqB,IAAGA,KAAK,CAACG,IAAN,CAAWC,OAAX,CAAmB,QAAnB,IAA+B,CAAC,CAAnC,CAAqC,CAAC1B,cAAc,CAAC2B,OAAf,CAAuB,SAAAC,EAAE,QAAEA,CAAAA,EAAE,CAACN,KAAD,CAAJ,EAAzB,EAAuC,CAAC,SAASX,CAAAA,gBAAT,EAA2B,CAACkB,aAAa,CAACpB,KAAD,CAAb,CAAqBN,MAAM,CAAC2B,KAAP,GAAeC,UAAU,CAACvB,IAAD,CAAMN,OAAO,CAACK,OAAd,CAAV,CAAkC,OAAM,CAACuB,KAAK,CAAC,gBAAI,CAACD,aAAa,CAACpB,KAAD,CAAb,CAAqBN,MAAM,CAAC2B,KAAP,GAAgB,CAAjD,CAAkDE,kBAAkB,CAAC,QAASA,CAAAA,kBAAT,CAA4BC,EAA5B,CAA+B,CAAC3B,SAAS,CAAC4B,IAAV,CAAeD,EAAf,EAAoB,CAAzH,CAAN,CAAkI,SAASlC,CAAAA,qBAAT,CAA+BG,OAA/B,CAAuC,CAAC,GAAG,CAACA,OAAO,CAACiC,QAAZ,CAAqB,CAAC,MAAM,CAACH,kBAAkB,CAAC,4BAAAJ,EAAE,CAAE,CAAC5B,cAAc,CAACkC,IAAf,CAAoBN,EAApB,EAAyB,CAAlD,CAAN,CAA2D,OAAO3B,CAAAA,kBAAkB,CAACC,OAAD,CAAzB,CAAoC","sourcesContent":["\"use strict\";exports.__esModule=true;exports.getEventSourceWrapper=getEventSourceWrapper;var eventCallbacks=[];function EventSourceWrapper(options){var source;var lastActivity=new Date();var listeners=[];if(!options.timeout){options.timeout=20*1000;}init();var timer=setInterval(function(){if(new Date()-lastActivity>options.timeout){handleDisconnect();}},options.timeout/2);function init(){source=new window.EventSource(options.path);source.onopen=handleOnline;source.onerror=handleDisconnect;source.onmessage=handleMessage;}function handleOnline(){if(options.log)console.log('[HMR] connected');lastActivity=new Date();}function handleMessage(event){lastActivity=new Date();for(var i=0;i<listeners.length;i++){listeners[i](event);}if(event.data.indexOf('action')!==-1){eventCallbacks.forEach(cb=>cb(event));}}function handleDisconnect(){clearInterval(timer);source.close();setTimeout(init,options.timeout);}return{close:()=>{clearInterval(timer);source.close();},addMessageListener:function addMessageListener(fn){listeners.push(fn);}};}function getEventSourceWrapper(options){if(!options.ondemand){return{addMessageListener:cb=>{eventCallbacks.push(cb);}};}return EventSourceWrapper(options);}"]},"metadata":{},"sourceType":"script"}