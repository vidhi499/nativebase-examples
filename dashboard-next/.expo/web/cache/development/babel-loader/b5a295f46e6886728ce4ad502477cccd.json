{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"useTypeahead\", {\n  enumerable: true,\n  get: function get() {\n    return _useTypeahead.useTypeahead;\n  }\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _primitives = require(\"../../primitives\");\n\nvar _useTypeahead = require(\"./useTypeahead\");\n\nvar _tools = require(\"../../../theme/tools\");\n\nvar _props = require(\"./props\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar Typeahead = function Typeahead(_ref, ref) {\n  var data = _ref.data,\n      renderItem = _ref.renderItem,\n      onChangeText = _ref.onChangeText,\n      toggleIcon = _ref.toggleIcon,\n      dropdownHeight = _ref.dropdownHeight,\n      numberOfItems = _ref.numberOfItems,\n      onSelectedItemChange = _ref.onSelectedItemChange,\n      inputValue = _ref.inputValue,\n      props = _objectWithoutProperties(_ref, [\"data\", \"renderItem\", \"onChangeText\", \"toggleIcon\", \"dropdownHeight\", \"numberOfItems\", \"onSelectedItemChange\", \"inputValue\"]);\n\n  var _react$default$useSta = _react[\"default\"].useState(data),\n      _react$default$useSta2 = _slicedToArray(_react$default$useSta, 2),\n      inputItems = _react$default$useSta2[0],\n      setInputItems = _react$default$useSta2[1];\n\n  var _ref2 = (0, _tools.extractInObject)(props, _props.layoutPropsList),\n      _ref3 = _slicedToArray(_ref2, 2),\n      layoutProps = _ref3[0],\n      newProps = _ref3[1];\n\n  var _ref4 = (0, _useTypeahead.useTypeahead)({\n    items: inputItems,\n    itemToString: function itemToString(item) {\n      return item.toString();\n    },\n    onInputValueChange: function onInputValueChange(_ref5) {\n      var inputValue = _ref5.inputValue;\n      onChangeText && onChangeText(inputValue);\n      setInputItems(data.filter(function (item) {\n        return item.toLowerCase().includes(inputValue.toLowerCase());\n      }));\n    },\n    onSelectedItemChange: onSelectedItemChange\n  }),\n      isOpen = _ref4.isOpen,\n      getInputProps = _ref4.getInputProps,\n      getMenuItemProps = _ref4.getMenuItemProps,\n      getMenuProps = _ref4.getMenuProps,\n      getToggleButtonProps = _ref4.getToggleButtonProps;\n\n  var toggleIconSetter = function toggleIconSetter() {\n    if (typeof toggleIcon === 'function') return toggleIcon({\n      isOpen: isOpen && getInputProps(inputValue, onChangeText).value !== ''\n    });\n    return toggleIcon;\n  };\n\n  _react[\"default\"].useEffect(function () {\n    if (getInputProps(inputValue, onChangeText).value === '') {\n      getToggleButtonProps().onPress();\n    }\n  }, [inputValue, onChangeText, getInputProps, getToggleButtonProps]);\n\n  var _ref6 = (0, _react.useState)(55),\n      _ref7 = _slicedToArray(_ref6, 2),\n      dropdownTop = _ref7[0],\n      setDropDownTop = _ref7[1];\n\n  var onLayout = (0, _react.useCallback)(function (event) {\n    var height = event.nativeEvent.layout.height;\n    setDropDownTop(height % 2 === 0 ? height + 1 : height);\n  }, []);\n  return _react[\"default\"].createElement(_primitives.Box, _extends({\n    width: \"100%\",\n    flexDirection: \"row\",\n    onLayout: onLayout\n  }, layoutProps), _react[\"default\"].createElement(_primitives.Box, {\n    flex: 1\n  }, _react[\"default\"].createElement(_primitives.Input, _extends({}, newProps, getInputProps(inputValue, onChangeText), {\n    InputRightElement: _react[\"default\"].createElement(_primitives.Button, _extends({\n      variant: \"unstyled\",\n      m: 0,\n      p: 0\n    }, getToggleButtonProps()), toggleIconSetter()),\n    ref: ref\n  }))), _react[\"default\"].createElement(_primitives.Box, _extends({\n    position: \"absolute\",\n    top: dropdownTop,\n    width: \"100%\",\n    height: dropdownHeight ? dropdownHeight : 200\n  }, getMenuProps()), _react[\"default\"].createElement(_reactNative.ScrollView, null, isOpen && getInputProps(inputValue, onChangeText).value !== '' && (numberOfItems && numberOfItems < inputItems.length ? inputItems.slice(0, numberOfItems) : inputItems).map(function (item, index) {\n    return _react[\"default\"].createElement(_primitives.Link, _extends({\n      isUnderlined: false,\n      key: \"\".concat(item).concat(index)\n    }, getMenuItemProps(item, index)), renderItem(item));\n  }))));\n};\n\nvar _default = (0, _react.forwardRef)(Typeahead);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["index.tsx"],"names":["Typeahead","props","React","layoutPropsList","getToggleButtonProps","items","itemToString","item","onInputValueChange","inputValue","onChangeText","setInputItems","data","onSelectedItemChange","toggleIconSetter","toggleIcon","isOpen","getInputProps","onLayout","event","height","setDropDownTop","ref","dropdownHeight","getMenuProps","numberOfItems","inputItems","getMenuItemProps","renderItem"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, forwardRef } from 'react';\nimport { ScrollView } from 'react-native';\nimport { Box, Input, Button, Link } from '../../primitives';\nimport { useTypeahead } from './useTypeahead';\nimport { extractInObject } from '../../../theme/tools';\nimport { ITypeaheadProps, layoutPropsList } from './props';\nconst Typeahead = (\n  {\n    data,\n    renderItem,\n    onChangeText,\n    toggleIcon,\n    dropdownHeight,\n    numberOfItems,\n    onSelectedItemChange,\n    inputValue,\n    ...props\n  }: ITypeaheadProps,\n  ref: any\n) => {\n  const [inputItems, setInputItems] = React.useState(data);\n  const [layoutProps, newProps] = extractInObject(props, layoutPropsList);\n\n  const {\n    isOpen,\n    getInputProps,\n    getMenuItemProps,\n    getMenuProps,\n    getToggleButtonProps,\n  } = useTypeahead({\n    items: inputItems,\n    itemToString: (item) => item.toString(),\n    onInputValueChange: ({ inputValue }) => {\n      onChangeText && onChangeText(inputValue);\n      setInputItems(\n        data.filter((item) =>\n          item.toLowerCase().includes(inputValue.toLowerCase())\n        )\n      );\n    },\n    onSelectedItemChange,\n  });\n  const toggleIconSetter = () => {\n    if (typeof toggleIcon === 'function')\n      return toggleIcon({\n        isOpen: isOpen && getInputProps(inputValue, onChangeText).value !== '',\n      });\n    return toggleIcon;\n  };\n\n  React.useEffect(() => {\n    if (getInputProps(inputValue, onChangeText).value === '') {\n      getToggleButtonProps().onPress();\n    }\n  }, [inputValue, onChangeText, getInputProps, getToggleButtonProps]);\n\n  const [dropdownTop, setDropDownTop]: any = useState(55);\n\n  const onLayout = useCallback((event) => {\n    const { height } = event.nativeEvent.layout;\n    setDropDownTop(height % 2 === 0 ? height + 1 : height); //not to use theme values\n  }, []);\n  return (\n    <Box width=\"100%\" flexDirection=\"row\" onLayout={onLayout} {...layoutProps}>\n      <Box flex={1}>\n        <Input\n          {...newProps}\n          {...getInputProps(inputValue, onChangeText)}\n          InputRightElement={\n            <Button variant=\"unstyled\" m={0} p={0} {...getToggleButtonProps()}>\n              {toggleIconSetter()}\n            </Button>\n          }\n          ref={ref}\n        />\n      </Box>\n      <Box\n        position=\"absolute\"\n        top={dropdownTop}\n        width=\"100%\"\n        height={dropdownHeight ? dropdownHeight : 200}\n        {...getMenuProps()}\n      >\n        <ScrollView>\n          {isOpen &&\n            getInputProps(inputValue, onChangeText).value !== '' &&\n            (numberOfItems && numberOfItems < inputItems.length\n              ? inputItems.slice(0, numberOfItems)\n              : inputItems\n            ).map((item, index) => (\n              <Link\n                isUnderlined={false}\n                key={`${item}${index}`}\n                {...getMenuItemProps(item, index)}\n              >\n                {renderItem(item)}\n              </Link>\n            ))}\n        </ScrollView>\n      </Box>\n    </Box>\n  );\n};\n\nexport default forwardRef<any, ITypeaheadProps>(Typeahead);\nexport { useTypeahead };\n"]},"metadata":{},"sourceType":"script"}