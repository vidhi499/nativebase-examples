{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _primitives = require(\"../../primitives\");\n\nvar _isNil = _interopRequireDefault(require(\"lodash/isNil\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction AspectView(props) {\n  var _react$default$useSta = _react[\"default\"].useState(),\n      _react$default$useSta2 = _slicedToArray(_react$default$useSta, 2),\n      layout = _react$default$useSta2[0],\n      setLayout = _react$default$useSta2[1];\n\n  var inputStyle = [_reactNative.StyleSheet.flatten(props.style) || {}];\n\n  if (layout) {\n    var _layout$width = layout.width,\n        width = _layout$width === void 0 ? 0 : _layout$width,\n        _layout$height = layout.height,\n        height = _layout$height === void 0 ? 0 : _layout$height;\n\n    if (width === 0) {\n      inputStyle.push({\n        width: height * props.aspectRatio,\n        height: height\n      });\n    } else {\n      inputStyle.push({\n        width: width,\n        height: width / props.aspectRatio\n      });\n    }\n  }\n\n  return _react[\"default\"].createElement(_primitives.Box, _extends({}, props, {\n    style: inputStyle,\n    onLayout: function onLayout(_ref) {\n      var inLayout = _ref.nativeEvent.layout;\n      return setLayout(inLayout);\n    }\n  }));\n}\n\nvar AspectRatio = function AspectRatio(_ref2) {\n  var style = _ref2.style,\n      ratio = _ref2.ratio,\n      children = _ref2.children,\n      props = _objectWithoutProperties(_ref2, [\"style\", \"ratio\", \"children\"]);\n\n  var computedStyle = style;\n\n  var newChildWithProps = _react[\"default\"].cloneElement(children, _objectSpread({}, children.props, {\n    style: _reactNative.StyleSheet.absoluteFillObject\n  }), children.props.children);\n\n  var aspectRatio = !(0, _isNil[\"default\"])(ratio) ? ratio : 4 / 3;\n\n  if (_reactNative.Platform.OS === 'web') {\n    return _react[\"default\"].createElement(AspectView, _extends({}, props, {\n      aspectRatio: aspectRatio,\n      style: style\n    }), newChildWithProps);\n  } else {\n    computedStyle = _reactNative.StyleSheet.flatten([style, {\n      aspectRatio: aspectRatio\n    }]);\n    return _react[\"default\"].createElement(_primitives.Box, _extends({}, props, {\n      style: computedStyle\n    }), newChildWithProps);\n  }\n};\n\nvar _default = AspectRatio;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["index.tsx"],"names":["React","inputStyle","StyleSheet","props","width","height","aspectRatio","nativeEvent","layout","inLayout","setLayout","AspectRatio","computedStyle","newChildWithProps","children","style","absoluteFillObject","Platform"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, ViewStyle, Platform } from 'react-native';\nimport { Box, IBoxProps } from '../../primitives';\nimport isNil from 'lodash/isNil';\n\nexport type IAspectRatioProps = IBoxProps & {\n  style?: ViewStyle;\n  ratio?: number;\n  children: JSX.Element;\n};\n\nfunction AspectView(props: any) {\n  const [layout, setLayout] = React.useState();\n  const inputStyle = [StyleSheet.flatten(props.style) || {}];\n  if (layout) {\n    // @ts-ignore\n    let { width = 0, height = 0 } = layout;\n    if (width === 0) {\n      inputStyle.push({ width: height * props.aspectRatio, height });\n    } else {\n      inputStyle.push({ width, height: width / props.aspectRatio });\n    }\n  }\n  return (\n    <Box\n      {...props}\n      style={inputStyle}\n      onLayout={({ nativeEvent: { layout: inLayout } }: any) =>\n        setLayout(inLayout)\n      }\n    />\n  );\n}\n\nconst AspectRatio = ({\n  style,\n  ratio,\n  children,\n  ...props\n}: IAspectRatioProps) => {\n  let computedStyle: ViewStyle | undefined = style;\n  let newChildWithProps = React.cloneElement(\n    children,\n    {\n      ...children.props,\n      style: StyleSheet.absoluteFillObject,\n    },\n    children.props.children\n  );\n  let aspectRatio = !isNil(ratio) ? ratio : 4 / 3;\n\n  // DOC:  It uses a aspectRatio property of React Native and manually calculate on Web\n  if (Platform.OS === 'web') {\n    return (\n      <AspectView {...props} aspectRatio={aspectRatio} style={style}>\n        {newChildWithProps}\n      </AspectView>\n    );\n  } else {\n    computedStyle = StyleSheet.flatten([style, { aspectRatio }]);\n    return (\n      <Box {...props} style={computedStyle}>\n        {newChildWithProps}\n      </Box>\n    );\n  }\n};\n\nexport default AspectRatio;\n"]},"metadata":{},"sourceType":"script"}