{"ast":null,"code":"\"use strict\";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});var react_1=__importDefault(require(\"react\"));var side_effect_1=__importDefault(require(\"./side-effect\"));var amp_context_1=require(\"./amp-context\");var head_manager_context_1=require(\"./head-manager-context\");var amp_1=require(\"./amp\");function defaultHead(){var inAmpMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var head=[react_1[\"default\"].createElement(\"meta\",{charSet:\"utf-8\"})];if(!inAmpMode){head.push(react_1[\"default\"].createElement(\"meta\",{name:\"viewport\",content:\"width=device-width\"}));}return head;}exports.defaultHead=defaultHead;function onlyReactElement(list,child){if(typeof child==='string'||typeof child==='number'){return list;}if(child.type===react_1[\"default\"].Fragment){return list.concat(react_1[\"default\"].Children.toArray(child.props.children).reduce(function(fragmentList,fragmentChild){if(typeof fragmentChild==='string'||typeof fragmentChild==='number'){return fragmentList;}return fragmentList.concat(fragmentChild);},[]));}return list.concat(child);}var METATYPES=['name','httpEquiv','charSet','itemProp'];function unique(){var keys=new Set();var tags=new Set();var metaTypes=new Set();var metaCategories={};return function(h){var unique=true;if(h.key&&typeof h.key!=='number'&&h.key.indexOf('$')>0){var key=h.key.slice(h.key.indexOf('$')+1);if(keys.has(key)){unique=false;}else{keys.add(key);}}switch(h.type){case'title':case'base':if(tags.has(h.type)){unique=false;}else{tags.add(h.type);}break;case'meta':for(var i=0,len=METATYPES.length;i<len;i++){var metatype=METATYPES[i];if(!h.props.hasOwnProperty(metatype))continue;if(metatype==='charSet'){if(metaTypes.has(metatype)){unique=false;}else{metaTypes.add(metatype);}}else{var category=h.props[metatype];var categories=metaCategories[metatype]||new Set();if(categories.has(category)){unique=false;}else{categories.add(category);metaCategories[metatype]=categories;}}}break;}return unique;};}function reduceComponents(headElements,props){return headElements.reduce(function(list,headElement){var headElementChildren=react_1[\"default\"].Children.toArray(headElement.props.children);return list.concat(headElementChildren);},[]).reduce(onlyReactElement,[]).reverse().concat(defaultHead(props.inAmpMode)).filter(unique()).reverse().map(function(c,i){var key=c.key||i;return react_1[\"default\"].cloneElement(c,{key:key});});}var Effect=side_effect_1[\"default\"]();function Head(_ref){var children=_ref.children;return react_1[\"default\"].createElement(amp_context_1.AmpStateContext.Consumer,null,function(ampState){return react_1[\"default\"].createElement(head_manager_context_1.HeadManagerContext.Consumer,null,function(updateHead){return react_1[\"default\"].createElement(Effect,{reduceComponentsToState:reduceComponents,handleStateChange:updateHead,inAmpMode:amp_1.isInAmpMode(ampState)},children);});});}Head.rewind=Effect.rewind;exports[\"default\"]=Head;","map":{"version":3,"sources":["/Users/vidhi/Sites/Projects/examples/test/dashboard-next/node_modules/next/dist/next-server/lib/head.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","side_effect_1","amp_context_1","head_manager_context_1","amp_1","defaultHead","inAmpMode","head","createElement","charSet","push","name","content","onlyReactElement","list","child","type","Fragment","concat","Children","toArray","props","children","reduce","fragmentList","fragmentChild","METATYPES","unique","keys","Set","tags","metaTypes","metaCategories","h","key","indexOf","slice","has","add","i","len","length","metatype","hasOwnProperty","category","categories","reduceComponents","headElements","headElement","headElementChildren","reverse","filter","map","c","cloneElement","Effect","Head","AmpStateContext","Consumer","ampState","HeadManagerContext","updateHead","reduceComponentsToState","handleStateChange","isInAmpMode","rewind"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst side_effect_1 = __importDefault(require(\"./side-effect\"));\nconst amp_context_1 = require(\"./amp-context\");\nconst head_manager_context_1 = require(\"./head-manager-context\");\nconst amp_1 = require(\"./amp\");\nfunction defaultHead(inAmpMode = false) {\n    const head = [react_1.default.createElement(\"meta\", { charSet: \"utf-8\" })];\n    if (!inAmpMode) {\n        head.push(react_1.default.createElement(\"meta\", { name: \"viewport\", content: \"width=device-width\" }));\n    }\n    return head;\n}\nexports.defaultHead = defaultHead;\nfunction onlyReactElement(list, child) {\n    // React children can be \"string\" or \"number\" in this case we ignore them for backwards compat\n    if (typeof child === 'string' || typeof child === 'number') {\n        return list;\n    }\n    // Adds support for React.Fragment\n    if (child.type === react_1.default.Fragment) {\n        return list.concat(react_1.default.Children.toArray(child.props.children).reduce((fragmentList, fragmentChild) => {\n            if (typeof fragmentChild === 'string' ||\n                typeof fragmentChild === 'number') {\n                return fragmentList;\n            }\n            return fragmentList.concat(fragmentChild);\n        }, []));\n    }\n    return list.concat(child);\n}\nconst METATYPES = ['name', 'httpEquiv', 'charSet', 'itemProp'];\n/*\n returns a function for filtering head child elements\n which shouldn't be duplicated, like <title/>\n Also adds support for deduplicated `key` properties\n*/\nfunction unique() {\n    const keys = new Set();\n    const tags = new Set();\n    const metaTypes = new Set();\n    const metaCategories = {};\n    return (h) => {\n        let unique = true;\n        if (h.key && typeof h.key !== 'number' && h.key.indexOf('$') > 0) {\n            const key = h.key.slice(h.key.indexOf('$') + 1);\n            if (keys.has(key)) {\n                unique = false;\n            }\n            else {\n                keys.add(key);\n            }\n        }\n        // eslint-disable-next-line default-case\n        switch (h.type) {\n            case 'title':\n            case 'base':\n                if (tags.has(h.type)) {\n                    unique = false;\n                }\n                else {\n                    tags.add(h.type);\n                }\n                break;\n            case 'meta':\n                for (let i = 0, len = METATYPES.length; i < len; i++) {\n                    const metatype = METATYPES[i];\n                    if (!h.props.hasOwnProperty(metatype))\n                        continue;\n                    if (metatype === 'charSet') {\n                        if (metaTypes.has(metatype)) {\n                            unique = false;\n                        }\n                        else {\n                            metaTypes.add(metatype);\n                        }\n                    }\n                    else {\n                        const category = h.props[metatype];\n                        const categories = metaCategories[metatype] || new Set();\n                        if (categories.has(category)) {\n                            unique = false;\n                        }\n                        else {\n                            categories.add(category);\n                            metaCategories[metatype] = categories;\n                        }\n                    }\n                }\n                break;\n        }\n        return unique;\n    };\n}\n/**\n *\n * @param headElements List of multiple <Head> instances\n */\nfunction reduceComponents(headElements, props) {\n    return headElements\n        .reduce((list, headElement) => {\n        const headElementChildren = react_1.default.Children.toArray(headElement.props.children);\n        return list.concat(headElementChildren);\n    }, [])\n        .reduce(onlyReactElement, [])\n        .reverse()\n        .concat(defaultHead(props.inAmpMode))\n        .filter(unique())\n        .reverse()\n        .map((c, i) => {\n        const key = c.key || i;\n        return react_1.default.cloneElement(c, { key });\n    });\n}\nconst Effect = side_effect_1.default();\n/**\n * This component injects elements to `<head>` of your page.\n * To avoid duplicated `tags` in `<head>` you can use the `key` property, which will make sure every tag is only rendered once.\n */\nfunction Head({ children }) {\n    return (react_1.default.createElement(amp_context_1.AmpStateContext.Consumer, null, ampState => (react_1.default.createElement(head_manager_context_1.HeadManagerContext.Consumer, null, updateHead => (react_1.default.createElement(Effect, { reduceComponentsToState: reduceComponents, handleStateChange: updateHead, inAmpMode: amp_1.isInAmpMode(ampState) }, children))))));\n}\nHead.rewind = Effect.rewind;\nexports.default = Head;\n"]},"metadata":{},"sourceType":"script"}